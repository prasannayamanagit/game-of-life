node('MAVEN_JDK8') {
    stage('version control') {
        git url: 'https://github.com/prasannayamanagit/game-of-life.git',
            branch: 'scripted'
    }
    stage('build the code') {
        sh 'export PATH="/usr/lib/jvm/java-8-openjdk-amd64/bin:$PATH" && mvn package'
    }
    stage ('archive the artifacts') {
        archiveArtifacts   onlyIfSuccessful: true,
        artifacts: '**/target/gameoflife.war',
        allowEmptyArchive: true
    }
    stage ('show the test results'){
        junit testResults: '**/surefire-reports/TEST-*.xml',
        allowEmptyResults: true
    }
}